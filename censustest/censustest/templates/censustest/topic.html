{% extends "base.html" %}
{% load censustest_extras %}

{% block content %}

	<div class="container theme-showcase" role="main">
		<div class="progress">
			<div class="progress-bar" role="progressbar" aria-valuenow="{{ topic.get_progress_percent }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ topic.get_progress_percent }}%; min-width: 2em;"><span>{{ topic.get_progress_percent }}% Complete</span></div>
		</div>

		<div class="page-header topic-header">
			<h1>{{ topic.text }}</h1>
		</div>

		{% if error_message %}
			<div class="alert alert-danger" role="alert">
				<strong>Error:</strong> {{ error_message }}
			</div>
		{% endif %}

		<form action="{% url 'censustest:get_next_topic' topic.sequence_num %}" method="post">
		{% csrf_token %}
		{% for question in topic.question_set.all %}
			<h3>{{ question.display_text }}</h3>
			{% if question.select_multiple %}
				<p>Select up to 10 choices</p>
			{% endif %}
			<ul class="list-group">
				{% for choice in question|sort_choices %}
					<li class="list-group-item">
					{% if question.select_multiple %}
						<input type="checkbox" name="question{{ question.id }}" id="choice{{ choice.id }}" value="{{ choice.id }}"/>
					{% else %}
						<input type="radio" name="question{{ question.id }}" id="choice{{ choice.id }}" value="{{ choice.id }}"/>
					{% endif %}
					<label for="choice{{ choice.id }}">{{ choice.text }}</label><br />
				</li>
				{% endfor %}
			</ul>
		{% endfor %}
		<input class="btn btn-lg btn-primary" type="submit" value="Save Answers" />
		</form>
	</div>

{% endblock %}
